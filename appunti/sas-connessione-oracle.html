<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connessione Oracle in SAS | SAS Appunti</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../appunti-style.css">
    <link rel="stylesheet" href="../dark-mode.css">
</head>
<body>
    <!-- PULSANTE DARK MODE -->
    <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Cambia tema">
        üåô
    </button>

    <!-- Menu Hamburger -->
    <div class="hamburger" id="hamburger">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>

    <!-- Menu Laterale -->
    <nav class="sidebar" id="sidebar">
        <div class="close-btn" id="closeBtn">&times;</div>
        <ul class="menu">
            <li><a href="../index.html">üè† Home</a></li>
            <li><a href="../sas-programming.html">üìä SAS Programming</a></li>
            <li><a href="../utility.html">üõ†Ô∏è Utility & Tools</a></li>
            <li><a href="../linux.html">üêß Linux & Shell</a></li>
        </ul>
    </nav>

    <!-- Contenuto -->
    <main class="content note-detail">
        <a href="../sas-programming.html" class="back-link">‚Üê Torna agli appunti SAS</a>

        <div class="note-header">
            <h1>Connessione Oracle in SAS</h1>
            <div class="note-meta">
                <span>üìÅ Categoria: <strong>Import/Export</strong></span>
                <span>üìÖ Aggiornato: <strong>12 Dicembre 2024</strong></span>
                <span>‚è±Ô∏è Lettura: <strong>7 min</strong></span>
            </div>
            <div class="card-tags">
                <span class="tag">oracle</span>
                <span class="tag">database</span>
                <span class="tag">libname</span>
                <span class="tag">proc sql</span>
            </div>
        </div>

        <!-- Descrizione -->
        <div class="note-section">
            <h2>üìã Descrizione</h2>
            <p>
                Questo appunto mostra i <strong>due metodi principali</strong> per connettersi a 
                un database Oracle da SAS:
            </p>
            <ul>
                <li><strong>LIBNAME ORACLE</strong> - Connessione permanente con accesso diretto alle tabelle</li>
                <li><strong>PROC SQL + CONNECT TO ORACLE</strong> - Connessione temporanea con pass-through SQL</li>
            </ul>
        </div>

        <!-- Metodo 1: LIBNAME -->
        <div class="note-section">
            <h2>üîó Metodo 1: LIBNAME ORACLE</h2>
            <p>
                Crea una <strong>libreria permanente</strong> che punta al database Oracle. 
                Le tabelle Oracle diventano accessibili come normali dataset SAS.
            </p>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-language">SAS</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copia</button>
                </div>
                <pre><code><span class="sas-keyword">LIBNAME</span> eqdifram <span class="sas-keyword">ORACLE</span>  
    <span class="sas-keyword">UPDATE_LOCK_TYPE</span>=<span class="sas-keyword">ROW</span>  
    <span class="sas-keyword">dbclient_max_bytes</span>=<span class="sas-number">1</span>  
    <span class="sas-keyword">PATH</span>=<span class="sas-string">my_path</span>  
    <span class="sas-keyword">SCHEMA</span>=<span class="sas-string">mioschema</span>  
    <span class="sas-keyword">USER</span>=<span class="sas-string">mioutente</span>  
    <span class="sas-keyword">PASSWORD</span>=<span class="sas-string">"{SAS002}"</span>;</code></pre>
            </div>


        <!-- Metodo 2: PROC SQL -->
        <div class="note-section">
            <h2>üîå Metodo 2: PROC SQL + CONNECT TO ORACLE</h2>
            <p>
                Crea una <strong>connessione temporanea</strong> e permette di eseguire 
                <strong>SQL nativo Oracle</strong> (pass-through SQL).
            </p>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-language">SAS</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copia</button>
                </div>
                <pre><code><span class="sas-keyword">PROC SQL</span>;
   <span class="sas-keyword">CONNECT TO</span> <span class="sas-keyword">ORACLE</span>(<span class="sas-keyword">USER</span>=<span class="sas-string">mioutente</span>
                      <span class="sas-keyword">PASSWORD</span>=<span class="sas-string">"mia_password"</span> 
                      <span class="sas-keyword">PATH</span>=<span class="sas-string">my_path</span>);
   
   <span class="sas-keyword">CREATE TABLE</span> list_tab <span class="sas-keyword">AS</span> 
      <span class="sas-keyword">SELECT</span> * <span class="sas-keyword">FROM CONNECTION TO</span> <span class="sas-keyword">ORACLE</span>
      (<span class="sas-keyword">SELECT</span> OWNER, TABLE_NAME <span class="sas-keyword">FROM</span> ALL_TABLES);
   
   <span class="sas-keyword">DISCONNECT FROM</span> <span class="sas-keyword">ORACLE</span>;
<span class="sas-keyword">QUIT</span>;</code></pre>
            </div>

            <h3>Viste Sistema Oracle Utili:</h3>
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <thead>
                    <tr style="background: #f5f5f5;">
                        <th style="padding: 10px; border: 1px solid #ddd;">Vista</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Descrizione</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>ALL_TABLES</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Tutte le tabelle accessibili all'utente</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>USER_TABLES</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Solo tabelle dello schema dell'utente</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>DBA_TABLES</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Tutte le tabelle (richiede privilegi DBA)</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>ALL_TAB_COLUMNS</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Colonne delle tabelle accessibili</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Esempio Completo -->
        <div class="note-section">
            <h2>üéØ Esempio Completo d'Uso</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-language">SAS</span>
                    <button class="copy-btn" onclick="copyCode(this)">üìã Copia</button>
                </div>
                <pre><code><span class="sas-comment">/* Metodo 1: Usa LIBNAME per accesso diretto */</span>
<span class="sas-keyword">LIBNAME</span> ora <span class="sas-keyword">ORACLE</span>  
    <span class="sas-keyword">PATH</span>=<span class="sas-string">PROD_DB</span>  
    <span class="sas-keyword">SCHEMA</span>=<span class="sas-string">HR</span>  
    <span class="sas-keyword">USER</span>=<span class="sas-string">sas_user</span>  
    <span class="sas-keyword">PASSWORD</span>=<span class="sas-string">"{SAS002}ENCODED_PWD"</span>;

<span class="sas-comment">/* Leggi tabella EMPLOYEES */</span>
<span class="sas-keyword">DATA</span> work.employees;
    <span class="sas-keyword">SET</span> ora.EMPLOYEES;
    <span class="sas-keyword">WHERE</span> DEPARTMENT_ID = <span class="sas-number">10</span>;
<span class="sas-keyword">RUN</span>;

<span class="sas-comment">/* Libera connessione */</span>
<span class="sas-keyword">LIBNAME</span> ora <span class="sas-keyword">CLEAR</span>;

<span class="sas-comment">/* Metodo 2: Usa PROC SQL per query complessa */</span>
<span class="sas-keyword">PROC SQL</span>;
   <span class="sas-keyword">CONNECT TO</span> <span class="sas-keyword">ORACLE</span>(<span class="sas-keyword">USER</span>=<span class="sas-string">sas_user</span>
                      <span class="sas-keyword">PASSWORD</span>=<span class="sas-string">"my_pwd"</span> 
                      <span class="sas-keyword">PATH</span>=<span class="sas-string">PROD_DB</span>);
   
   <span class="sas-comment">/* Query con funzioni Oracle */</span>
   <span class="sas-keyword">CREATE TABLE</span> summary <span class="sas-keyword">AS</span> 
      <span class="sas-keyword">SELECT</span> * <span class="sas-keyword">FROM CONNECTION TO</span> <span class="sas-keyword">ORACLE</span>
      (
         <span class="sas-keyword">SELECT</span> 
            DEPARTMENT_ID,
            <span class="sas-function">COUNT</span>(*) <span class="sas-keyword">AS</span> NUM_EMPLOYEES,
            <span class="sas-function">AVG</span>(SALARY) <span class="sas-keyword">AS</span> AVG_SALARY,
            <span class="sas-function">NVL</span>(<span class="sas-function">MAX</span>(COMMISSION_PCT), <span class="sas-number">0</span>) <span class="sas-keyword">AS</span> MAX_COMM
         <span class="sas-keyword">FROM</span> HR.EMPLOYEES
         <span class="sas-keyword">GROUP BY</span> DEPARTMENT_ID
      );
   
   <span class="sas-keyword">DISCONNECT FROM</span> <span class="sas-keyword">ORACLE</span>;
<span class="sas-keyword">QUIT</span>;</code></pre>
            </div>
        </div>

    </main>

    <script src="../script.js"></script>
    <script src="../appunti-search.js"></script>
    <script src="../theme-toggle.js"></script>
</body>
</html>
